<div class="container">
  <div class="row">

    <% if @search_results.empty? %>
      <p>No mates found for you</p>
    <% else %>

        <div class="cards-container" data-controller="user-games">
          <div class="cards">
            <% @search_results.each_with_index do |search_result, index| %>
            <div class="search-card " style="background-image: url('<%= search_result.photo.url %>'); z-index: calc(100 - <%= index %>);"
                          data-user-games-target="card"
                          data-profile-id="<%= search_result.id %>"
                          data-current-user-id="<%= current_user.id %>">

              <div class="search-card-infos <% unless index == 0 %>hidden<% end %>">
                <h2><%= search_result.username %></h2>
                <%= search_result.gender.upcase %> - <%= search_result.age %> yo
              </div>

              <div class="search-card-infos <% unless index == 0 %>hidden<% end %>">
                  <% user_game = search_result.user_games.find_by(game: Game.find_by(name: params[:name])) %>
                  <% if user_game %>
                    <%= user_game.game.name %>
                    <br>
                    Mood: <%= user_game.mood %>
                    <br>
                    Level: <%= user_game.level %>
                  <% else %>
                    <p>User game not found</p>
                  <% end %>
              </div>

              <div class="search-block-btn">
                   <button class="dislike-button" data-action="user-games#handleSwipeLeft:prevent"><i class="fa-solid fa-xmark"></i></button>

                <%= button_to(profile_likes_path(profile_id: search_result.id, current_user_id: current_user.id, name: params[:name], level: params[:level], mood: params[:mood], gender: params[:gender], age: params[:age]), method: :post, params: { liked_user_id: search_result.id }, class: "like-button", remote: true, data: { action: "user-games#handleSwipeRight:prevent"} ) do %>
                  <i class="fa-regular fa-heart"></i>
                <% end %>

              </div>

            </div>
            <% end %>
            <div class="suggestion-div hidden">
              <div>
                <h2>Try Again</h2>
                <p>There are no more profiles to display. Please try again later.</p>

                <%= link_to root_path do %>
                <button class="btn custom-button">Try again mate</button>
                <% end %>
              </div>
            </div>
          </div>
        </div>
    <% end %>
  </div>
</div>
